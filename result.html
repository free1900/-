<!doctype html>
<html lang="en-US" dir="ltr">

  <head>
    <meta charset="utf-8">
      <script src="static/js/echarts.min.js"></script>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>python爬虫天气数据分析</title>
{#    <link rel="apple-touch-icon" sizes="180x180" href="static/img/favicons/apple-touch-icon.png">#}
{#    <link rel="icon" type="image/png" sizes="32x32" href="static/img/favicons/favicon-32x32.png">#}
{#    <link rel="icon" type="image/png" sizes="16x16" href="static/img/favicons/favicon-16x16.png">#}
    <link rel="shortcut icon" type="image/x-icon" href="static/img/Weather.png">
    <link rel="manifest" href="static/img/favicons/manifest.json">
    <meta name="msapplication-TileImage" content="static/img/favicons/mstile-150x150.png">
    <meta name="theme-color" content="#ffffff">
    <link rel="preconnect" href="https://fonts.gstatic.com/">
    <link href="static/css/css2.css" rel="stylesheet">
    <link href="static/css/css21.css" rel="stylesheet">
    <link href="static/css/phoenix.min.css" rel="stylesheet" id="style-default">
    <link href="#" rel="stylesheet" id="user-style-default">
    <style>
      body {
        opacity: 0;
      }
    </style>
  </head>
  <body>
    <main class="main" id="top" >
      <div class="container-fluid px-0">

        <nav class="navbar navbar-light navbar-top navbar-expand" >
          <div class="navbar-logo" ><button class="btn navbar-toggler navbar-toggler-humburger-icon" type="button" data-bs-toggle="collapse" data-bs-target="#navbarVerticalCollapse" aria-controls="navbarVerticalCollapse" aria-expanded="false" aria-label="Toggle Navigation"><span class="navbar-toggle-icon"><span class="toggle-line"></span></span></button> <a class="navbar-brand me-1 me-sm-3" href="/index">
              <div class="d-flex align-items-center">
                <div class="d-flex align-items-center"><img src="static/img/Weather.png" alt="Weather" width="32">
                  <p class="logo-text ms-2 d-none d-sm-block" style="color: #49525d">Weather</p>
                </div>
              </div>
            </a></div>
          <div class="collapse navbar-collapse">
            <div class="search-box d-none d-lg-block"style="margin: 0 auto">
              <form action="/result" method="post" class="position-relative" data-bs-toggle="search" data-bs-display="static"><input class="form-control form-control-sm search-input search min-h-auto" type="search" name="city" placeholder="请输入要查询的城市..." aria-label="Search"> <span class="fas fa-search search-box-icon"></span></form>
            </div>

          </div>
        </nav>
        <div class="content pt-5">
          <div class="pb-5">
            <div class="row g-5">
              <div class="col-12 col-xxl-6">
                <div class="mb-8">
                  <h2 class="mb-2">python爬虫天气数据分析</h2>
                  <h5 class="text-700 fw-semi-bold">应用Python爬虫、Flask框架、Echarts等技术实现</h5>
                </div>
                <div class="row align-items-center g-4">
                  <div class="col-12 col-md-auto">
                    <div class="d-flex align-items-center"><img src="static/img/tem.png" alt="" height="46" width="46">
                      <div class="ms-3">当前温度：{{ t }}℃</div>
                    </div>
                  </div>
                  <div class="col-12 col-md-auto">
                    <div class="d-flex align-items-center"><img src="static/img/wind.png" alt="" height="46" width="46">
                      <div class="ms-3">风向：{{ wi }}</div>
                    </div>
                  </div>
                  <div class="col-12 col-md-auto">
                    <div class="d-flex align-items-center"><img src="static/img/rh.png" alt="" height="46" width="46">
                      <div class="ms-3">相对湿度：{{ r }}%</div>
                    </div>
                  </div>
                </div>
                <hr class="bg-200 mb-6 mt-4">
                <div class="row flex-between-center mb-4 g-3">
                  <div class="col-auto">
                    <h3>一天温度变化曲线图</h3>
                    <p class="text-700 lh-sm mb-0">   </p>
                  </div>
                  </div>
                <div id="today" style="min-height:320px;width:100%"></div>
              </div>
              <div class="col-12 col-xxl-6">
                <div class="row g-3">

                  <div class="col-12 col-md-6">
                    <div id="weather" class="card border border-200 shadow-none h-100">
                    </div>
                  </div>
                  <div class="col-12 col-md-6">
                    <div class="card border border-200 shadow-none h-100">

                   <div id = 'rt' style="height:276px;width:100%;"></div>

                    </div>
                  </div>
                  <div class="col-12 col-md-6">
                    <div class="card border border-200 shadow-none h-100">
                   <div id = 'wd_1' style="height:276px;width:100%;"></div>
                    </div>
                  </div>
                  <div class="col-12 col-md-6">
                    <div class="card border border-200 shadow-none h-100">
                    <div id = 'wd_7' style="height:276px;width:100%;"></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>


          <div class=" bg-white px-6 pt-7 pb-6 border-top border-300">
            <div class="row g-5" style="width: 100%">
              <div class="col-12 col-xl-6">
                <div class="me-xl-4">
                  <div>
                    <h3>未来一周气温变化曲线图</h3>
                    <p class="text-700">最高气温与最低气温</p>
                  </div>
                  <div id="day_7" style="height:300px; width:100%"></div>
                </div>
              </div>
              <div class="col-12 col-xl-6">
                <div>
                  <h3>当天相对湿度变化曲线图</h3>
                  <p class="text-700">时刻变化下的相对湿度趋势</p>
                </div>
                <div id = 'RH' style="height:300px;"></div>
              </div>
            </div>
          </div>
          <footer class="footer">
            <div class="row g-0 justify-content-between align-items-center h-100 mb-3">
              <div class="col-12 col-sm-auto text-center">
{#                <p class="mb-0 text-900">Copyright &copy; 2022.Company name All rights reserved.</p>#}
              </div>
              <div class="col-12 col-sm-auto text-center">

              </div>
            </div>
          </footer>
        </div>
      </div>
    </main>
    <script src="static/js/phoenix.js"></script>
    <script src="static/js/ecommerce-dashboard.js"></script>
    <script type="text/javascript">
        var chartDom = document.getElementById('today');
var myChart = echarts.init(chartDom);
var option;

option = {
  color: ['#4ECF79'],
  tooltip: {
    trigger: 'axis',
    formatter: '{b}时: {c}°C'
  },
  grid: {
    left: '3%',
    {#right: '4%',#}
    bottom: '3%',
    containLabel: true
  },
  xAxis: {
    type: 'category',
    boundaryGap: false,
    name: '时间（h）',
    data:{{ time }}
  },
  yAxis: [
    {
      type: 'value',
      name: '温度（°C）',

    }
  ],

  series: [
    {
      type: 'line',
      smooth: true,
      stack: 'Total',
        data:{{ today_t }},
          markPoint: {
      data: [{
        type: 'max',
        name: '最大值'
      }, {
        type: 'min',
        name: '最小值'
      }]
    },
       markLine: {
        data: [{ type: 'average' }]
      }
    }
  ]
};

option && myChart.setOption(option);

    </script>
    <script type="text/javascript">
        var chartDom = document.getElementById('weather');
var myChart = echarts.init(chartDom);
var option;

option = {
  title: {
    text: '一周天气情况分布图',
    left: 'center'
  },
  tooltip: {
    trigger: 'item'
  },
  legend: {
    orient: 'vertical',
    left: 'left'
  },
  series: [
    {

      type: 'pie',

      radius: '75%',
       data: [
        {% for i in range(wea|length) %}
          { value: {{num[i]}}, name: '{{wea[i]}}' },
        {% endfor %}
      ],
      label: {
        show: true,
        position: 'inside',
        formatter: `{d}%`
      }
    }
  ]
};

option && myChart.setOption(option);

    </script>
    <script type="text/javascript">
        var chartDom = document.getElementById('rt');
var myChart = echarts.init(chartDom);
var option;

option = {
    title: {
        text: '温湿度相关性分析图',
        top: '3%',
        left: 'center'
    },
    tooltip: {
        trigger: 'axis',
        axisPointer: {
            type: 'cross',
            label: {
                backgroundColor: '#6a7985'
            }
        }
    },
    grid: {
        left: '3%',
        right: '7%',
        bottom: '3%',
        containLabel: true
    },
    xAxis: {
        type: 'value',
        axisLabel: {
            formatter: '{value} °C'
        },
        min: 0
    },
    yAxis: {
        type: 'value',
        axisLabel: {
            formatter: '{value} %'
        },
        min: 0
    },
    series: [{
        data: [
            {% for i in range(rh|length) %}
            [{{today_t[i]}}, {{rh[i]}}],
            {% endfor %}
        ],
        type: 'scatter',
        symbolSize: function(data) {
            return Math.sqrt(data[1]) * 4;
        },
        label: {
            show: true,
            formatter: function(param) {
                return param.data[1] + '%';
            },
            position: 'top',
            fontSize: 12
        },
        itemStyle: {
            normal: {
                color: '#00CED1'
            }
        }
    }]
};
option && myChart.setOption(option);

    </script>
    <script type="text/javascript">
  var chartDom = document.getElementById('wd_1');
var myChart = echarts.init(chartDom);
var option;
option = {
  title: {
    text: '一周风速风向变化图'
  },
  grid: {
    left: '3%',
    right: '4%',
    bottom: '0',
    containLabel: true
  },
  tooltip: {},
  legend: {
    data: ['风速']
  },
  xAxis: {
    data: {{time|tojson}},
      axisLabel: {
            formatter: '{value} 时'
        }
  },
  yAxis: {
      axisLabel: {
            formatter: '{value}级'
        },
  },
  series: [
    {
      name: '风速',
      type: 'line',
      data: {{sd}},
      label: {
        show: true,
        position: 'top',
        formatter: function (params) {
          var index = params.dataIndex;
          return {{wd|tojson}}[index]
        }
      }
    }
  ]
};

myChart.setOption(option);
    </script>
    <script type="text/javascript">
        var chartDom = document.getElementById('wd_7');
var myChart = echarts.init(chartDom);
var option;

option = {
  title: {
    text: '一周风速风向变化图'
  },
  grid: {
    left: '3%',
    right: '4%',
    bottom: '0',
    containLabel: true
  },
  tooltip: {},
  legend: {
    data: ['风速']
  },
  xAxis: {
    data: {{date|tojson}}
  },
  yAxis: {
      axisLabel: {
            formatter: '{value}级'
        },
  },
  series: [
    {
      name: '风速',
      type: 'line',
      data: {{s_7}},
      label: {
        show: true,
        position: 'top',
        formatter: function (params) {
          var index = params.dataIndex;
          return {{w_1|tojson}}[index] + '\n' + {{w_2|tojson}}[index]
        }
      }
    }
  ]
};

option && myChart.setOption(option);

    </script>
    <script type="text/javascript">
        var chartDom = document.getElementById('day_7');
var myChart = echarts.init(chartDom);
var option;

option = {
  tooltip: {
  trigger: 'axis',
  formatter: function(params) {
    var date = params[0].name;
    var minTemp = params[0].value + '°C';
    var maxTemp = params[1].value + '°C';
    return date + '<br>最低气温: ' + minTemp + '<br>最高气温: ' + maxTemp;
  }
},

  legend: {
    data: ['最低气温', '最高气温']
  },
  grid: {
    left: '3%',
    right: '4%',
    bottom: '3%',
    containLabel: true
  },
  xAxis: {
    type: 'category',
    boundaryGap: false,
    data: {{ date|tojson }}
  },
  yAxis: [{
  type: 'value',
  axisLabel: {
    formatter: '{value} °C'
  }
}],

  series: [{
      name: '最低气温',
      color: '#00DDFF',
      type: 'line',
      smooth: true,
      stack: 'min',
      data: {{ min }},
      markPoint: {
        data: [{
          type: 'min',
          name: '最小值'
        }]
      },
      markLine: {
        data: [{
          type: 'average',
          name: '平均最低气温'
        }]
      }
    },
    {
  name: '最高气温',
  color: 'rgb(255, 70, 131)',
  type: 'line',
  smooth: true,
  stack: 'max',
  data: {{ max }},
  markPoint: {
    data: [
      {
        type: 'max',
        name: '最大值'
      }
    ]
  },
  markLine: {
    data: [
      {
        type: 'average',
        name: '平均最高气温'
      }
    ]
  }
}
  ]
};

option && myChart.setOption(option);
    </script>
    <script type="text/javascript">
        var chartDom = document.getElementById('RH');
var myChart = echarts.init(chartDom);
var option;

option = {
  color: ['#0066FF'],
  grid: {
    left: '3%',
    right: '4%',
    bottom: '3%',
    containLabel: true
  },
  xAxis: {
    axisLabel: {
      formatter: '{value} 时'
    },
    type: 'category',
    data: {{ time }}
  },
  yAxis: {
    type: 'value',
    axisLabel: {
      formatter: '{value} %'
    }
  },
  tooltip: {
    trigger: 'axis',
    formatter: '{b}时: {c}%'
  },
  series: [{
    data: {{ rh }},
    type: 'line',
    smooth: true,
    markLine: {
      data: [{
        type: 'average',
        name: '平均相对湿度'
      }]
    }
  }]
};


option && myChart.setOption(option);

    </script>

</body>

</html>